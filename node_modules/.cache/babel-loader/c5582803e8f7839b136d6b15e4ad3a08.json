{"ast":null,"code":"import _regeneratorRuntime from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/node_modules/@babel/runtime/helpers/esm/inherits\";/* eslint-disable jsx-a11y/label-has-associated-control */import React from'react';import'./ajoutLivre.css';import axios from'axios';import{Redirect}from'react-router';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import{MDBContainer,MDBRow,MDBCard,MDBCardBody}from'mdbreact';var AddBook=/*#__PURE__*/function(_React$Component){_inherits(AddBook,_React$Component);function AddBook(props){var _this;_classCallCheck(this,AddBook);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddBook).call(this,props));_this.change=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.setState(_defineProperty({},e.target.id,e.target.value));case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleSubmitBook=function(e){var _this$state=_this.state,title=_this$state.title,author=_this$state.author,year=_this$state.year,date=_this$state.date,edition=_this$state.edition,typeBook=_this$state.typeBook;if(title&&author&&year&&date&&edition&&typeBook){console.log(_this.state);var formData=new FormData();formData.append(\"title\",_this.state.title);formData.append(\"author\",_this.state.author);formData.append(\"year\",_this.state.year);formData.append(\"date\",_this.state.date);formData.append(\"edition\",_this.state.edition);formData.append(\"typeBook\",_this.state.typeBook);var url=\"http://localhost:8888/API/AjouterLivre/ajout_livre_back.php\";axios.post(url,formData,{withCredentials:true})//succès ajout livre\n.then(function(response){console.log(response);toast.success(' Livre ajouté à votre bibliothèque',{position:\"top-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});})//echec ajout livre\n.catch(function(error){if(error.response&&error.response.status===403){console.log(error);toast.warn('Attention : ce livre existe déjà dans votre bibliothèque',{position:\"top-center\",autoClose:5000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}});}else{//cas ou les champs ne sont pas correctement remplis\n_this.setState({error:'Veuillez saisir tous les champs !'});}setTimeout(function(){_this.setState({error:''});},2000);e.preventDefault();};_this.state={noSession:false,//booleen qui permet de verifier si la session de l'utilisateur est active, initialisé a \"faux\"\ntitle:null,//va contenir la valeur entrée pour le champs \"titre\" du formulaire\nauthor:null,//va contenir la valeur entrée pour le champs \"auteur\" du formulaire\nyear:null,//va contenir la valeur entrée pour le champs \"année de sortie\" du formulaire\ndate:null,//va contenir la valeur entrée pour le champs \"date d'achat\" du formulaire\nedition:null,//va contenir la valeur entrée pour le champs \"edition\" du formulaire\ntypeBook:null,//va contenir la valeur entrée pour le champs \"type\" du formulaire\nerror:''//va contenir l'erreur en cas d'erreur\n};_this.checkSession=_this.checkSession.bind(_assertThisInitialized(_this));return _this;}//Vérifie que la session est active\n_createClass(AddBook,[{key:\"checkSession\",value:function checkSession(){var _this2=this;axios.get(\"http://localhost:8888/API/Session/session.php\",{withCredentials:true}).then(function(response){console.log(response);}).catch(function(error){if(error.response&&error.response.status===404){_this2.setState({noSession:true});//s'il n'y a pas de session active, change la valeur du booleen comme \"vrai\"\nconsole.log(error);}});}//methode qui permet d'attribuer à \"title\", \"author\", \"year\", \"date\", \"edition\" et \"typeBook\" les valeurs entrées au clavier par l'utilisateur\n},{key:\"render\",value:function render(){var error=this.state.error;var container={height:1000};var noSession=this.state.noSession;//appel à la methode qui verifie la session\nthis.checkSession();//s'il n'y a pas de session active, redirection vers la page de connexion\nif(noSession){return React.createElement(Redirect,{to:\"/\"});}return React.createElement(MDBContainer,{style:container,className:\"containerInscription\"},React.createElement(MDBRow,null,React.createElement(\"div\",{className:\"colInscription\"},React.createElement(MDBCard,null,React.createElement(MDBCardBody,null,React.createElement(\"form\",{onSubmit:this.handleSubmitBook,className:\"form\"},React.createElement(\"div\",{className:\"text-center\"},React.createElement(\"h2\",{className:\"dark-grey-text mb-5\"},\"Ajouter un livre\")),React.createElement(\"div\",{className:\"grey-text\"},React.createElement(\"label\",{htmlFor:\"title\",className:\"grey-text\"},\"Titre\"),React.createElement(\"input\",{type:\"text\",id:\"title\",placeholder:\"Titre\",className:\"form-control\",onChange:this.change,required:true}),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"author\",className:\"grey-text\"},\"Auteur\"),React.createElement(\"input\",{type:\"text\",id:\"author\",placeholder:\"Auteur\",className:\"form-control\",onChange:this.change,required:true}),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"year\",className:\"grey-text\"},\"Ann\\xE9e de sortie\"),React.createElement(\"input\",{type:\"number\",id:\"year\",className:\"form-control\",placeholder:\"Ann\\xE9e\",onChange:this.change,required:true}),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"date\",className:\"grey-text\"},\"Date d'achat\"),React.createElement(\"input\",{type:\"date\",id:\"date\",placeholder:\"jj/mm/aa\",className:\"form-control\",onChange:this.change,required:true}),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"edition\",className:\"grey-text\"},\"Edition\"),React.createElement(\"input\",{type:\"text\",id:\"edition\",placeholder:\"Edition\",className:\"form-control\",onChange:this.change,required:true}),React.createElement(\"br\",null),React.createElement(\"label\",{htmlFor:\"typeBook\",className:\"grey-text\"},\"Type\"),React.createElement(\"input\",{type:\"text\",id:\"typeBook\",placeholder:\"Type\",className:\"form-control\",onChange:this.change,required:true})),React.createElement(\"div\",{className:\"text-center py-4 mt-3\"},React.createElement(\"button\",{className:\"btn btn-primary\",onClick:this.handleSubmitBook,type:\"submit\"},\"Valider\"),React.createElement(ToastContainer,null),error&&React.createElement(\"p\",{className:\"error\"},error))))))));}}]);return AddBook;}(React.Component);export default AddBook;","map":{"version":3,"sources":["/Users/Megane/MonProjet/2019-l2aj2/trunk/2019-l2aj2/APP_Mac/src/components/AjoutLivre/ajoutLivre.js"],"names":["React","axios","Redirect","ToastContainer","toast","MDBContainer","MDBRow","MDBCard","MDBCardBody","AddBook","props","change","e","setState","target","id","value","handleSubmitBook","state","title","author","year","date","edition","typeBook","console","log","formData","FormData","append","url","post","withCredentials","then","response","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","catch","error","status","warn","setTimeout","preventDefault","noSession","checkSession","bind","get","container","height","Component"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/label-has-associated-control */\nimport React from 'react';\nimport './ajoutLivre.css';\nimport axios from 'axios';\nimport { Redirect} from 'react-router';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n  \n\n\n\nimport {\n  MDBContainer, MDBRow, MDBCard, MDBCardBody,\n} from 'mdbreact';\n\nclass AddBook extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      noSession: false,//booleen qui permet de verifier si la session de l'utilisateur est active, initialisé a \"faux\"\n      title: null,//va contenir la valeur entrée pour le champs \"titre\" du formulaire\n      author: null,//va contenir la valeur entrée pour le champs \"auteur\" du formulaire\n      year: null,//va contenir la valeur entrée pour le champs \"année de sortie\" du formulaire\n      date: null,//va contenir la valeur entrée pour le champs \"date d'achat\" du formulaire\n      edition: null,//va contenir la valeur entrée pour le champs \"edition\" du formulaire\n      typeBook: null,//va contenir la valeur entrée pour le champs \"type\" du formulaire\n      error: '',//va contenir l'erreur en cas d'erreur\n\n    }\n    this.checkSession = this.checkSession.bind(this);\n  }\n\n  //Vérifie que la session est active\n  checkSession () {\n    axios.get(\"http://localhost:8888/API/Session/session.php\", {withCredentials: true})\n\n    .then(function(response){\n      console.log(response);\n    })\n\n    .catch((error) => {\n      if(error.response && error.response.status=== 404){\n        this.setState({noSession: true});//s'il n'y a pas de session active, change la valeur du booleen comme \"vrai\"\n        console.log(error);\n      }\n    });\n  }\n\n  //methode qui permet d'attribuer à \"title\", \"author\", \"year\", \"date\", \"edition\" et \"typeBook\" les valeurs entrées au clavier par l'utilisateur\n  change = async e => {\n    await this.setState({\n      [e.target.id]: e.target.value,\n    });\n  }\n\n//methode qui permet d'envoyer les données au fichier PHP \"ajout_livre_back.php\" afin d'enregistrer le livre, lorque l'utilisateur appuie sur le bouton \"valider\"\n  handleSubmitBook = e => {\n\n    const {\n      title, author, year, date, edition, typeBook,\n    } = this.state;\n\n    if (title && author && year && date && edition && typeBook ) {\n\n        \n        console.log(this.state);\n        let formData = new FormData();\n        formData.append(\"title\",this.state.title);\n        formData.append(\"author\",this.state.author);\n        formData.append(\"year\",this.state.year);\n        formData.append(\"date\",this.state.date);\n        formData.append(\"edition\",this.state.edition);\n        formData.append(\"typeBook\",this.state.typeBook);\n        const url = \"http://localhost:8888/API/AjouterLivre/ajout_livre_back.php\";\n        axios.post(url,formData, {withCredentials: true})\n\n        //succès ajout livre\n        .then(function(response){\n          console.log(response);\n          toast.success(' Livre ajouté à votre bibliothèque', {\n            position: \"top-center\",\n            autoClose: 5000,\n            hideProgressBar: false,\n            closeOnClick: true,\n            pauseOnHover: true,\n            draggable: true,\n            progress: undefined,\n            });\n          \n          })\n        \n        //echec ajout livre\n        .catch((error) => {\n          if (error.response && error.response.status === 403){\n            console.log(error);\n            toast.warn('Attention : ce livre existe déjà dans votre bibliothèque', {\n              position: \"top-center\",\n              autoClose: 5000,\n              hideProgressBar: false,\n              closeOnClick: true,\n              pauseOnHover: true,\n              draggable: true,\n              progress: undefined,\n              });\n            \n          }\n        }); \n\n        \n    } else {\n      //cas ou les champs ne sont pas correctement remplis\n      this.setState({\n        error: 'Veuillez saisir tous les champs !',\n      });\n    }\n    setTimeout(() => {\n      this.setState({\n        error: '',\n      });\n    }, 2000);\n          \n    e.preventDefault();\n  }\n\n  render() {\n    const { error } = this.state;\n    const container = {height: 1000};\n    const {noSession} = this.state;\n    \n\n    //appel à la methode qui verifie la session\n    this.checkSession ();\n\n     //s'il n'y a pas de session active, redirection vers la page de connexion\n     if(noSession){\n      return <Redirect to=\"/\"/>;\n    }\n\n    return (\n      <MDBContainer style={container} className=\"containerInscription\">\n        <MDBRow>\n          <div className=\"colInscription\">\n            <MDBCard>\n              <MDBCardBody>\n                <form onSubmit={this.handleSubmitBook} className=\"form\">\n                  <div className=\"text-center\">\n                    <h2 className=\"dark-grey-text mb-5\">\n                      Ajouter un livre\n                    </h2>\n                  </div>\n                  <div className=\"grey-text\">\n                    <label htmlFor=\"title\" className=\"grey-text\">\n                      Titre\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"title\"\n                      placeholder=\"Titre\"\n                      className=\"form-control\"\n                      onChange={this.change}\n                      required\n                    />\n\n                    <br />\n\n                    <label htmlFor=\"author\" className=\"grey-text\">\n                      Auteur\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"author\"\n                      placeholder=\"Auteur\"\n                      className=\"form-control\"\n                      onChange={this.change}\n                      required\n                    />\n\n                    <br />\n\n                    <label htmlFor=\"year\" className=\"grey-text\">\n                      Année de sortie\n                    </label>\n                    <input\n                      type=\"number\"\n                      id=\"year\"\n                      className=\"form-control\"\n                      placeholder=\"Année\"\n                      onChange={this.change}\n                      required\n                    />\n\n                    <br />\n\n                    <label htmlFor=\"date\" className=\"grey-text\">\n                      Date d&apos;achat\n                    </label>\n                    <input\n                      type=\"date\"\n                      id=\"date\"\n                      placeholder=\"jj/mm/aa\"\n                      className=\"form-control\"\n                      onChange={this.change}\n                      required\n                    />\n\n                    <br />\n\n                    <label htmlFor=\"edition\" className=\"grey-text\">\n                      Edition\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"edition\"\n                      placeholder=\"Edition\"\n                      className=\"form-control\"\n                      onChange={this.change}\n                      required\n                    />\n\n                    <br />\n\n                    <label htmlFor=\"typeBook\" className=\"grey-text\">\n                      Type\n                    </label>\n                    <input\n                      type=\"text\"\n                      id=\"typeBook\"\n                      placeholder=\"Type\"\n                      className=\"form-control\"\n                      onChange={this.change}\n                      required\n                    />\n\n\n                  </div>\n                  <div className=\"text-center py-4 mt-3\">\n                    <button className=\"btn btn-primary\" onClick={this.handleSubmitBook} type=\"submit\">Valider</button>\n                    <ToastContainer />\n                    {\n                     error && (\n                     <p className=\"error\">{error}</p>\n                     )\n                    }\n                  </div>\n\n                </form>\n\n              </MDBCardBody>\n            </MDBCard>\n          </div>\n        </MDBRow>\n      </MDBContainer>\n\n    );\n  }\n}\n\nexport default AddBook;"]},"metadata":{},"sourceType":"module"}