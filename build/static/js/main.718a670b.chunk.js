(this.webpackJsonpconexion=this.webpackJsonpconexion||[]).push([[0],{100:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(19),o=a(6),s=a(20),c=a.n(s),i=(a(61),a(8)),u=a(9),m=a(11),h=a(10),p=a(12),d=a(2),E=a(5),f=a.n(E),b=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1,logOut:!1},a.toggleCollapse=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleLogOut",value:function(){f.a.get("http://localhost:8888/API/MonCompte/logout.php",{withCredentials:!0}).then(function(e){console.log("successful logout",e),this.setState({logOut:!0})}.bind(this)).catch((function(e){e.response&&403===e.response.status&&console.log(e)}))}},{key:"render",value:function(){return this.state.logOut?r.a.createElement(o.a,{to:"/"}):r.a.createElement(d.t,{style:{backgroundColor:"rgb(83, 4, 4)"},dark:!0,expand:"md",scrolling:!0,fixed:"top"},r.a.createElement(d.v,{onClick:this.toggleCollapse}),r.a.createElement(d.f,{id:"navbarCollapse3",isOpen:this.state.isOpen,navbar:!0},r.a.createElement(d.u,{left:!0},r.a.createElement(d.r,{active:!0,className:"M"},r.a.createElement(d.s,{to:"/accueil"},r.a.createElement("strong",null,"MyBibli"))),r.a.createElement(d.r,{active:!0},r.a.createElement(d.s,{to:"/mesLivres"},"Mes livres")),r.a.createElement(d.r,null,r.a.createElement(d.s,{to:"/ajoutLivre"},"Ajouter un livre")),r.a.createElement(d.r,null,r.a.createElement(d.s,{to:"/mesPrets"},"G\xe9rer mes pr\xeats")),r.a.createElement(d.r,null,r.a.createElement(d.s,{to:"/prochainAchat"},"Mes prochains achats"))),r.a.createElement(d.u,{right:!0},r.a.createElement(d.r,null,r.a.createElement(d.h,null,r.a.createElement(d.k,{nav:!0,caret:!0},r.a.createElement("div",{className:"d-none d-md-inline"},"Contact")),r.a.createElement(d.j,{className:"dropdown-default"},r.a.createElement(d.i,{href:"mailto:mybibli.sup@gmail.com"},"mybibli.sup@gmail.com")))),r.a.createElement(d.r,null,r.a.createElement(d.h,null,r.a.createElement(d.k,{nav:!0,caret:!0},r.a.createElement("div",{className:"d-none d-md-inline"},"Mon compte")),r.a.createElement(d.j,{className:"dropdown-default"},r.a.createElement(d.i,null,r.a.createElement(l.b,{to:"/gererMonCompte"},"G\xe9rer mon compte")),r.a.createElement(d.i,{onClick:this.handleLogOut},r.a.createElement(l.b,{to:"/"},"Se d\xe9connecter"))))))))}}]),t}(n.Component),g=function(e){var t=e.location.pathname;return r.a.createElement(r.a.Fragment,null,"/"!==t&&"/inscription"!==t&&"/erreur404"!==t&&"/accueil"!==t&&r.a.createElement("header",null,r.a.createElement(b,null)))},v=function(e){var t=e.location.pathname;return r.a.createElement(r.a.Fragment,null,"/"!==t&&"/inscription"!==t&&"/erreur404"!==t&&r.a.createElement("footer",{className:"footer"},r.a.createElement(d.l,{color:"cyan",className:"font-small darken-3 pt-0"},r.a.createElement("div",{className:"footer-copyright text-center py-3"},r.a.createElement(d.g,{fluid:!0},"\xa9 ",(new Date).getFullYear()," Copyright:"," ",r.a.createElement("a",{href:"http://localhost:3000/accueil"}," MyBibli "))))))},y=(a(100),function(e){var t=e.children,a=e.location;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{location:a}),r.a.createElement("main",null,t),r.a.createElement(v,{location:a}))}),k=a(7),S=a.n(k),N=a(17),j=a(16),x=a(4),C=(a(102),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).change=function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(Object(N.a)({},t.target.id,t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmitLogIn=function(e){var t=a.state,n=t.email;if(t.password&&n){console.log(a.state);var r=new FormData;r.append("email",a.state.email),r.append("password",a.state.password);f.a.post("http://localhost:8888/API/Connexion/login.php",r,{withCredentials:!0}).then(function(e){this.setState({loggedIn:!0}),console.log("connexion r\xe9ussie - email et mot de passe valides",e)}.bind(Object(x.a)(a))).catch((function(e){e.response&&403===e.response.status&&a.setState({error:e.response.data}),console.log("login non r\xe9ussi")}))}else a.setState({error:"Veuillez saisir tous les champs !"});setTimeout((function(){a.setState({error:""})}),2e3),e.preventDefault()},a.state={password:null,email:null,loggedIn:!1,error:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.error;return this.state.loggedIn?r.a.createElement(o.a,{to:"/accueil"}):r.a.createElement("div",null,r.a.createElement("h1",{className:"myBibli"},"MyBibli"),r.a.createElement(d.g,{className:"containerConnexion"},r.a.createElement(d.y,null,r.a.createElement(d.c,null,r.a.createElement(d.d,{className:"mx-4"},r.a.createElement("form",{onSubmit:this.handleSubmitLogIn},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"dark-grey-text mb-5"},"Connexion")),r.a.createElement("label",{htmlFor:"email",className:"grey-text"},"Adresse mail",r.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",onChange:this.change})),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password",className:"grey-text"},"Mot de passe",r.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",onChange:this.change})),r.a.createElement("p",{className:"font-small blue-text d-flex justify-content-end pb-3"}),r.a.createElement("div",{className:"text-center mb-3"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:this.handleSubmitLogIn},"Se connecter"),e&&r.a.createElement("p",{className:"error"},e)),r.a.createElement("p",{className:"font-small dark-grey-text text-right d-flex justify-content-center mb-3 pt-2"}))),r.a.createElement(d.p,{className:"mx-5 pt-3 mb-1"},r.a.createElement("p",{className:"font-small grey-text d-flex justify-content-end"},r.a.createElement(l.b,{to:"/inscription",className:"blue-text ml-1"},"S'inscrire")))))))}}]),t}(r.a.Component)),O=function(){return r.a.createElement("p",null,"Je suis l'erreur 404")},w=(a(103),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).change=function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(Object(N.a)({},t.target.id,t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmitSignUp=function(e){var t=a.state,n=t.lastname,r=t.firstname,l=t.email,o=t.password,s=t.passwordBis;if(n&&r&&o&&l&&s)if(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(l))if(o.length<6)a.setState({error:"Veuillez saisir un mot de passe avec au moins 6 caract\xe8res !"});else if(o!==s)a.setState({error:"Le mot de passe de confirmation ne correspond pas !"});else{console.log(a.state);var c=new FormData;c.append("firstname",a.state.firstname),c.append("lastname",a.state.lastname),c.append("email",a.state.email),c.append("password",a.state.password);f.a.post("http://localhost:8888/API/inscription/inscription_back.php",c).then(function(e){this.setState({isSignedUp:!0}),console.log("inscription r\xe9ussie",e),alert("Formulaire valid\xe9")}.bind(Object(x.a)(a))).catch((function(e){e.response&&403===e.response.status&&a.setState({error:"L\u2019adresse e-mail "+l+" est d\xe9j\xe0 prise."}),console.log("formulaire non valide",e)}))}else a.setState({error:"Veuillez saisir une adresse mail valide !"});else a.setState({error:"Veuillez saisir tous les champs !"});setTimeout((function(){a.setState({error:""})}),2e3),e.preventDefault()},a.state={lastname:null,firstname:null,password:null,passwordBis:null,email:null,isSignedUp:!1,error:""},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.state.error;return this.state.isSignedUp?r.a.createElement(o.a,{to:"/"}):r.a.createElement(d.g,{style:{height:750},className:"containerInscription"},r.a.createElement(d.y,null,r.a.createElement("div",{className:"colInscription"},r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement("form",{onSubmit:this.handleSubmitSignUp,className:"form"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"dark-grey-text mb-5"},"Inscription")),r.a.createElement("div",{className:"grey-text"},r.a.createElement("label",{htmlFor:"lastName",className:"grey-text"},"Nom"),r.a.createElement("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Nom",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"firstname",className:"grey-text"},"Pr\xe9nom"),r.a.createElement("input",{type:"text",id:"firstname",name:"firstname",placeholder:"Pr\xe9nom",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"email",className:"grey-text"},"Adresse mail"),r.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"mail@exemple.com",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password",className:"grey-text"},"Mot de passe"),r.a.createElement("input",{type:"password",id:"password",name:"password",onChange:this.change,className:"form-control",placeholder:"Veuillez saisir un mot de passe",required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"passwordBis",className:"grey-text"},"Mot de passe de confirmation"),r.a.createElement("input",{type:"password",id:"passwordBis",className:"form-control",placeholder:"Veuillez confirmer votre mot de passe",onChange:this.change,required:!0})),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmitSignUp,type:"submit"},"S'inscrire"),e&&r.a.createElement("p",{className:"error"},e))))))))}}]),t}(r.a.Component)),A=(a(104),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleChangeFirstName=function(e){a.setState({firstName:e.target.value})},a.handleChangeLastName=function(e){a.setState({lastName:e.target.value})},a.handleSubmitFirstName=function(e){return function(t){var n=new FormData;n.append("firstname",e);f.a.post("http://localhost:8888/API/MonCompte/modifier_firstname.php",n,{withCredentials:!0}).then((function(e){console.log(e.status,e),alert("Modification du pr\xe9nom enregistr\xe9e")})).catch((function(e){console.log(e),e.response&&403===e.response.status&&(console.log(e),alert("Echec modification"))})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.handleSubmitLastName=function(e){return function(t){var n=new FormData;n.append("lastname",e);f.a.post("http://localhost:8888/API/MonCompte/modifier_lastname.php",n,{withCredentials:!0}).then((function(e){console.log(e.status,e),alert("Modification du nom enregistr\xe9e")})).catch((function(e){console.log(e),e.response&&403===e.response.status&&(console.log(e),alert("Echec modification"))})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.state={noSession:!1,informations:[],loading:!0,error:"",firstName:void 0,lastName:void 0},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"componentDidMount",value:function(){var e=Object(j.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8888/API/MonCompte/mon_compte.php",e.next=3,fetch("http://localhost:8888/API/MonCompte/mon_compte.php",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({informations:a.results.profile[0],loading:!1}),console.log(a.results.profile);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.firstName,n=t.lastName,l=t.informations,s=this.state.noSession;return this.checkSession(),s?r.a.createElement(o.a,{to:"/"}):this.state.loading?r.a.createElement("div",null,"chargement..."):r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyAccount"},"Mes informations personnelles"),r.a.createElement(d.z,{hover:!0,bordered:!0,maxHeight:"350px"},r.a.createElement(d.A,null,r.a.createElement("tr",null,r.a.createElement("td",null,"Adresse email : ",l.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Pr\xe9nom :",r.a.createElement("br",null),r.a.createElement("input",{className:"inputModif",value:a,defaultValue:l.firstname,onChange:function(t){return e.handleChangeFirstName(t)}}),r.a.createElement(d.b,{color:"dark",onClick:this.handleSubmitFirstName(this.state.firstName)},"Modifier"))),r.a.createElement("tr",null,r.a.createElement("td",null,"Nom :",r.a.createElement("br",null),r.a.createElement("input",{className:"inputModif",value:n,defaultValue:l.lastname,onChange:function(t){return e.handleChangeLastName(t)}}),r.a.createElement(d.b,{color:"dark",onClick:this.handleSubmitLastName(this.state.lastName)},"Modifier"))))))}}]),t}(r.a.Component)),B=(a(105),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).change=function(e){a.setState(Object(N.a)({},e.target.id,e.target.value))},a.searchTitle=function(e){return function(t){console.log(e);var n=new FormData;n.append("title",e);f.a.post("http://localhost:8888/API/Accueil/recherche_titre.php",n,{withCredentials:!0}).then((function(e){return e.data})).then((function(e){a.setState({filter:e.results.livres}),console.log(a.state.filter)})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.searchAuthor=function(e){return function(t){console.log(e);var n=new FormData;n.append("author",e);f.a.post("http://localhost:8888/API/Accueil/recherche_author.php",n,{withCredentials:!0}).then((function(e){return e.data})).then((function(e){a.setState({filter:e.results.livres}),console.log(a.state.filter)})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.searchYear=function(e){return function(t){console.log(e);var n=new FormData;n.append("year",e);f.a.post("http://localhost:8888/API/Accueil/recherche_year.php",n,{withCredentials:!0}).then((function(e){return e.data})).then((function(e){a.setState({filter:e.results.livres}),console.log(a.state.filter)})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.searchEdition=function(e){return function(t){console.log(e);var n=new FormData;n.append("edition",e);f.a.post("http://localhost:8888/API/Accueil/recherche_edition.php",n,{withCredentials:!0}).then((function(e){return e.data})).then((function(e){a.setState({filter:e.results.livres}),console.log(a.state.filter)})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.searchTypeBook=function(e){return function(t){console.log(e);var n=new FormData;n.append("typeBook",e);f.a.post("http://localhost:8888/API/Accueil/recherche_typeBook.php",n,{withCredentials:!0}).then((function(e){return e.data})).then((function(e){a.setState({filter:e.results.livres}),console.log(a.state.filter)})),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.state={noSession:!1,search:"",filter:[],error:""},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a.searchTitle=a.searchTitle.bind(Object(x.a)(a)),a.searchAuthor=a.searchAuthor.bind(Object(x.a)(a)),a.searchYear=a.searchYear.bind(Object(x.a)(a)),a.searchEdition=a.searchEdition.bind(Object(x.a)(a)),a.searchTypeBook=a.searchTypeBook.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"handleLogOut",value:function(){f.a.get("http://localhost:8888/API/MonCompte/logout.php",{withCredentials:!0}).then(function(e){console.log("successful logout",e),this.setState({logOut:!0})}.bind(this)).catch((function(e){e.response&&403===e.response.status&&console.log(e)}))}},{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"render",value:function(){var e=this.state.noSession,t={backgroundColor:"rgb(83, 4, 4)"},a=this.state.logOut;return this.checkSession(),e||a?r.a.createElement(o.a,{to:"/"}):r.a.createElement("div",null,r.a.createElement("h1",{className:"myBibliBis"},"MyBibli"),r.a.createElement("div",{className:"searchPosition"},r.a.createElement(d.e,null,r.a.createElement("div",{className:"active-pink-3 active-pink-4 mb-4"},r.a.createElement("input",{className:"form-control",id:"search",type:"text",placeholder:"Indiquez votre recherche...",onChange:this.change})))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("ul",{className:"ulFilter"},r.a.createElement("li",{className:"liFilter"},"Puis s\xe9lectionnez un filtre :  "),r.a.createElement("li",{className:"liFilter"},r.a.createElement(d.b,{onClick:this.searchTitle(this.state.search),color:"dark",size:"lg"},"Titre")),r.a.createElement("li",{className:"liFilter"},r.a.createElement(d.b,{onClick:this.searchAuthor(this.state.search),color:"dark",size:"lg"},"Auteur")),r.a.createElement("li",{className:"liFilter"},r.a.createElement(d.b,{onClick:this.searchYear(this.state.search),color:"dark",size:"lg"},"Ann\xe9e de sortie")),r.a.createElement("li",{className:"liFilter"},r.a.createElement(d.b,{onClick:this.searchEdition(this.state.search),color:"dark",size:"lg"},"Edition")),r.a.createElement("li",{className:"liFilter"},r.a.createElement(d.b,{onClick:this.searchTypeBook(this.state.search),color:"dark",size:"lg"},"Type de livre"))),r.a.createElement("ul",{className:"resultsSearch"},this.state.filter?this.state.filter.map((function(e){return r.a.createElement("li",{className:".liResults",key:e.id},e.title,", ",e.author,", ",e.typeBook,", sorti en ",e.year,", \xe9dition ",e.edition,", achet\xe9 le: ",e.date,", statut: ",e.status)})):r.a.createElement("em",null,"Chargement..."))),r.a.createElement(d.h,{className:"drop"},r.a.createElement(d.k,{style:t},r.a.createElement("div",null,"Contact")),r.a.createElement(d.j,{basic:!0},r.a.createElement(d.i,{href:"mailto:mybibli.sup@gmail.com"},"mybibli.sup@gmail.com"))),r.a.createElement(d.h,{className:"dropdownn"},r.a.createElement(d.k,{style:t},"Mon Compte"),r.a.createElement(d.j,{basic:!0},r.a.createElement(d.i,null,r.a.createElement(l.b,{to:"/gererMonCompte"},"G\xe9rer mon compte")),r.a.createElement(d.i,{onClick:this.handleLogOut},r.a.createElement(l.b,{to:"/"},"Se d\xe9connecter")))),r.a.createElement(d.g,{style:{height:270},className:"containerAcceuil"},r.a.createElement("div",{className:"sidenav"},r.a.createElement("br",null),r.a.createElement("a",{href:"/mesLivres"},"Mes livres"),r.a.createElement("br",null),r.a.createElement("a",{href:"/ajoutlivre"},"Ajouter un livre"),r.a.createElement("br",null),r.a.createElement("a",{href:"/mesPrets"},"G\xe9rer mes pr\xeats"),r.a.createElement("br",null),r.a.createElement("a",{href:"/prochainAchat"},"Mes prochains achats"))))}}]),t}(n.Component)),M=(a(106),a(28)),P=(a(107),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).change=function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(Object(N.a)({},t.target.id,t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmitBook=function(e){var t=a.state,n=t.title,r=t.author,l=t.year,o=t.date,s=t.edition,c=t.typeBook;if(n&&r&&l&&o&&s&&c){console.log(a.state);var i=new FormData;i.append("title",a.state.title),i.append("author",a.state.author),i.append("year",a.state.year),i.append("date",a.state.date),i.append("edition",a.state.edition),i.append("typeBook",a.state.typeBook);f.a.post("http://localhost:8888/API/AjouterLivre/ajout_livre_back.php",i,{withCredentials:!0}).then((function(e){console.log(e),M.b.success(" Livre ajout\xe9 \xe0 votre biblioth\xe8que",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})})).catch((function(e){e.response&&403===e.response.status&&(console.log(e),M.b.warn("Attention : ce livre existe d\xe9j\xe0 dans votre biblioth\xe8que",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}))}))}else a.setState({error:"Veuillez saisir tous les champs !"});setTimeout((function(){a.setState({error:""})}),2e3),e.preventDefault()},a.state={noSession:!1,title:null,author:null,year:null,date:null,edition:null,typeBook:null,error:""},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"render",value:function(){var e=this.state.error,t=this.state.noSession;return this.checkSession(),t?r.a.createElement(o.a,{to:"/"}):r.a.createElement(d.g,{style:{height:1e3},className:"containerInscription"},r.a.createElement(d.y,null,r.a.createElement("div",{className:"colInscription"},r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement("form",{onSubmit:this.handleSubmitBook,className:"form"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"dark-grey-text mb-5"},"Ajouter un livre")),r.a.createElement("div",{className:"grey-text"},r.a.createElement("label",{htmlFor:"title",className:"grey-text"},"Titre"),r.a.createElement("input",{type:"text",id:"title",placeholder:"Titre",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"author",className:"grey-text"},"Auteur"),r.a.createElement("input",{type:"text",id:"author",placeholder:"Auteur",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"year",className:"grey-text"},"Ann\xe9e de sortie"),r.a.createElement("input",{type:"number",id:"year",className:"form-control",placeholder:"Ann\xe9e",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"date",className:"grey-text"},"Date d'achat"),r.a.createElement("input",{type:"date",id:"date",placeholder:"jj/mm/aa",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"edition",className:"grey-text"},"Edition"),r.a.createElement("input",{type:"text",id:"edition",placeholder:"Edition",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"typeBook",className:"grey-text"},"Type"),r.a.createElement("input",{type:"text",id:"typeBook",placeholder:"Type",className:"form-control",onChange:this.change,required:!0})),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmitBook,type:"submit"},"Valider"),r.a.createElement(M.a,null),e&&r.a.createElement("p",{className:"error"},e))))))))}}]),t}(r.a.Component)),D=(a(108),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).change=function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(Object(N.a)({},t.target.id,t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmitLend=function(e){var t=a.state,n=t.title,r=t.author,l=t.borrower,o=t.borrowDate;if(n&&r&&l&&o){console.log(a.state);var s=new FormData;s.append("title",a.state.title),s.append("author",a.state.author),s.append("borrower",a.state.borrower),s.append("borrowDate",a.state.borrowDate);f.a.post("http://localhost:8888/API/AjouterPret/ajout_pret.php",s,{withCredentials:!0}).then(function(e){this.setState({registeredLend:!0}),console.log(e),alert("Pr\xeat enregistr\xe9")}.bind(Object(x.a)(a))).catch((function(e){e.response&&403===e.response.status&&(console.log(e),alert(e.response.data))}))}else a.setState({error:"Veuillez saisir tous les champs !"});setTimeout((function(){a.setState({error:""})}),2e3),e.preventDefault()},a.state={noSession:!1,title:null,author:null,borrower:null,borrowDate:null,registeredLend:!1,error:""},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"render",value:function(){var e=this.state.error,t=this.state.registeredLend,a=this.state.noSession;return this.checkSession(),a?r.a.createElement(o.a,{to:"/"}):t?r.a.createElement(o.a,{to:"/mesPrets"}):r.a.createElement(d.g,{style:{height:800},className:"containerGerePret"},r.a.createElement(d.y,null,r.a.createElement("div",{className:"colGerePret"},r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement("form",{onSubmit:this.handleSubmitLend,className:"form"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"dark-grey-text mb-5"},"Ajouter un pr\xeat")),r.a.createElement("div",{className:"grey-text"},r.a.createElement("label",{htmlFor:"title",className:"grey-text"},"Titre"),r.a.createElement("input",{type:"text",id:"title",placeholder:"Titre",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"author",className:"grey-text"},"Auteur"),r.a.createElement("input",{type:"text",id:"author",placeholder:"Auteur",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"borrower",className:"grey-text"},"Emprunteur"),r.a.createElement("input",{type:"text",id:"borrower",placeholder:"Nom de l'emprunteur",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"borrowDate",className:"grey-text"},"Date d'emprunt"),r.a.createElement("input",{type:"date",id:"borrowDate",placeholder:"jj/mm/aa",className:"form-control",onChange:this.change,required:!0})),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmitLend,type:"submit"},"Valider"),e&&r.a.createElement("p",{className:"error"},e))))))))}}]),t}(r.a.Component)),F=(a(109),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).change=function(){var e=Object(j.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState(Object(N.a)({},t.target.id,t.target.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSubmitPurchase=function(e){var t=a.state,n=t.title,r=t.author;if(n&&r){console.log(a.state);var l=new FormData;l.append("title",a.state.title),l.append("author",a.state.author);f.a.post("http://localhost:8888/API/AjouterAchat/ajout_prochain_achat.php",l,{withCredentials:!0}).then(function(e){this.setState({registeredPurchase:!0}),console.log(e),alert("Livre enregistr\xe9 dans vos prochains achats")}.bind(Object(x.a)(a))).catch((function(e){e.response&&403===e.response.status&&(console.log(e),alert("Erreur: Ce livre existe d\xe9j\xe0 dans votre biblioth\xe8que !"))}))}else a.setState({error:"Veuillez saisir tous les champs !"});setTimeout((function(){a.setState({error:""})}),2e3),e.preventDefault()},a.state={noSession:!1,title:null,author:null,registeredPurchase:!1,error:""},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"render",value:function(){var e=this.state.error,t=this.state.registeredPurchase,a=this.state.noSession;return this.checkSession(),a?r.a.createElement(o.a,{to:"/"}):t?r.a.createElement(o.a,{to:"/prochainAchat"}):r.a.createElement(d.g,{style:{height:800},className:"containerAchat"},r.a.createElement(d.y,null,r.a.createElement("div",{className:"colAchat"},r.a.createElement(d.c,null,r.a.createElement(d.d,null,r.a.createElement("form",{onSubmit:this.handleSubmitPurchase,className:"form"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"dark-grey-text mb-5"},"Ajouter un prochain achat")),r.a.createElement("div",{className:"grey-text"},r.a.createElement("label",{htmlFor:"title",className:"grey-text"},"Titre"),r.a.createElement("input",{type:"text",id:"title",placeholder:"Titre",className:"form-control",onChange:this.change,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"author",className:"grey-text"},"Auteur"),r.a.createElement("input",{type:"text",id:"author",placeholder:"Auteur",className:"form-control",onChange:this.change,required:!0})),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement("button",{className:"btn btn-primary",onClick:this.handleSubmitPurchase,type:"submit"},"Valider"),e&&r.a.createElement("p",{className:"error"},e))))))))}}]),t}(r.a.Component)),I=(a(110),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).openModalLend=function(e){return function(t){a.setState({modal:!0,idLend:e})}},a.closeModalLend=function(){a.setState({modal:!1})},a.change=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.returnBook=function(e){return function(t){var n=a.state,r=n.idLend,l=n.lends,o=l;console.log(r,"idBookSubmit"),a.setState({modal:!1});var s=new FormData;s.append("id",r),s.append("returnDate",e);f.a.post("http://localhost:8888/API/GererPrets/rendu_pret.php",s,{withCredentials:!0}).then((function(e){console.log(e),o=l.filter((function(e){return e.id!==r})),alert("Succ\xe8s : Livre \xe0 nouveau marqu\xe9 comme disponible")})).catch((function(e){console.log(e),e.response&&403===e.response.status&&(console.log(e),alert("Echec du rendu"))})),setTimeout((function(){a.setState({lends:o})}),500),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.state={noSession:!1,loading:!0,lends:[],returnDate:"",modal:!1,id:"",error:"",idLend:null},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a.returnBook=a.returnBook.bind(Object(x.a)(a)),a.openModalLend=a.openModalLend.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"componentDidMount",value:function(){var e=Object(j.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8888/API/GererPrets/liste_prets.php",e.next=3,fetch("http://localhost:8888/API/GererPrets/liste_prets.php",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({lends:a.results.livres,loading:!1}),console.log(a.results.livres);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.noSession;return this.checkSession(),t?r.a.createElement(o.a,{to:"/"}):this.state.loading?r.a.createElement("div",null,"chargement..."):0===this.state.lends.length?r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyLends"}," Mes pr\xeats "),r.a.createElement("div",{className:"noLend"},"Vous n'avez actuellement aucun pr\xeat en cours."),r.a.createElement("div",{className:"buttonGere"},r.a.createElement(n.Fragment,null,r.a.createElement(d.b,{href:"/formulaireGerePret",color:"dark"},"Nouveau pr\xeat"))),r.a.createElement("div",{className:"buttonHistoric"},r.a.createElement(n.Fragment,null,r.a.createElement(d.b,{href:"/historique",color:"dark"},"Historique des pr\xeats")))):r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyLends"}," Mes pr\xeats "),r.a.createElement("br",null),r.a.createElement("h2",null," Vous avez ",this.state.lends.length," pr\xeat(s) en cours:"),r.a.createElement("br",null),r.a.createElement(d.z,{hover:!0,bordered:!0,scrollY:!0,maxHeight:"350px"},r.a.createElement(d.B,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titre"),r.a.createElement("th",null,"Auteur"),r.a.createElement("th",null,"Emprunteur"),r.a.createElement("th",null,"Date d'emprunt"),r.a.createElement("th",null))),r.a.createElement(d.A,null,this.state.lends.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.author),r.a.createElement("td",null,t.borrower),r.a.createElement("td",null,t.borrowDate),r.a.createElement("td",null,r.a.createElement(d.b,{onClick:e.openModalLend(t.id),color:"dark"},"Rendu"),r.a.createElement(d.n,{isOpen:e.state.modal},r.a.createElement(d.q,null,"Date de rendu"),r.a.createElement(d.o,null,r.a.createElement("input",{type:"date",name:"returnDate",placeholder:"jj/mm/aa",className:"form-control",onChange:function(t){return e.change(t)}})),r.a.createElement(d.p,null,r.a.createElement(d.b,{color:"danger",onClick:e.closeModalLend},"Annuler"),r.a.createElement(d.b,{color:"dark",onClick:e.returnBook(e.state.returnDate)},"Enregistrer")))))})))),r.a.createElement("div",{className:"buttonGere"},r.a.createElement(n.Fragment,null,r.a.createElement(d.b,{href:"/formulaireGerePret",color:"dark"},"Nouveau pr\xeat"))),r.a.createElement("div",{className:"buttonHistoric"},r.a.createElement(n.Fragment,null,r.a.createElement(d.b,{href:"/historique",color:"dark"},"Historique des pr\xeats"))))}}]),t}(r.a.Component)),L=(a(111),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).openModalBook=function(e,t,n,r,l,o,s){return function(c){a.setState({modal:!0,idBook:e,title:t,author:n,year:r,date:l,edition:o,typeBook:s})}},a.closeModalBook=function(){a.setState({modal:!1})},a.change=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.editBook=function(e,t,n,r,l,o){return function(s){var c=a.state,i=c.idBook,u=c.books,m=u;console.log(i,"idBookSubmit"),a.setState({modal:!1});var h=new FormData;h.append("id",i),h.append("title",e),h.append("author",t),h.append("year",n),h.append("date",r),h.append("edition",l),h.append("typeBook",o);f.a.post("http://localhost:8888/API/MesLivres/modif_livre.php",h,{withCredentials:!0}).then((function(e){console.log(e.status,e),alert("Modifications enregistr\xe9es, veuillez recharger la page"),m=u.filter((function(e){return e.id!==i}))})).catch((function(e){console.log(e),e.response&&403===e.response.status&&(console.log(e),alert("Echec modification"))})),setTimeout((function(){a.setState({books:m})}),500),setTimeout((function(){a.setState({error:""})}),2e3),s.preventDefault()}},a.handleDelete=function(e){return function(t){var n=a.state.books,r=n,l=new FormData;l.append("id",e);f.a.post("http://localhost:8888/API/MesLivres/supprimer_livre.php",l,{withCredentials:!0}).then((function(t){console.log(t),r=n.filter((function(t){return t.id!==e})),alert("Livre supprim\xe9 de votre biblioth\xe8que")})).catch((function(e){console.log(e),403===e.response.status&&(console.log(e),alert("Echec de la suppression"))})),setTimeout((function(){a.setState({books:r})}),500),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.state={noSession:!1,loading:!0,books:[],modal:!1,title:"",author:"",year:"",date:"",edition:"",typeBook:"",id:"",error:"",idBook:null},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a.handleDelete=a.handleDelete.bind(Object(x.a)(a)),a.editBook=a.editBook.bind(Object(x.a)(a)),a.openModalBook=a.openModalBook.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"componentDidMount",value:function(){var e=Object(j.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8888/API/MesLivres/liste_livres.php",e.next=3,fetch("http://localhost:8888/API/MesLivres/liste_livres.php",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({books:a.results.livres,loading:!1}),console.log(a.results.livres);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.noSession;return this.checkSession(),t?r.a.createElement(o.a,{to:"/"}):this.state.loading?r.a.createElement("div",null,"chargement..."):0===this.state.books.length?r.a.createElement("div",null,r.a.createElement("h1",{className:"myBibli"}," Mes livres "),r.a.createElement("div",{className:"noBook"},"Vous n'avez actuellement aucun livre dans votre biblioth\xe8que.")):r.a.createElement("div",null,r.a.createElement("h1",{className:"myBibli"}," Mes livres "),r.a.createElement("br",null),r.a.createElement("h2",null," Vous avez ",this.state.books.length," livre(s) dans votre biblioth\xe8que:"),r.a.createElement("br",null),r.a.createElement(d.z,{hover:!0,bordered:!0,scrollY:!0,maxHeight:"400px"},r.a.createElement(d.B,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titre"),r.a.createElement("th",null,"Auteur"),r.a.createElement("th",null,"Ann\xe9e de sortie"),r.a.createElement("th",null,"Date d'achat"),r.a.createElement("th",null,"Edition"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Statut"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement(d.A,null,this.state.books.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.author),r.a.createElement("td",null,t.year),r.a.createElement("td",null,t.date),r.a.createElement("td",null,t.edition),r.a.createElement("td",null,t.typeBook),r.a.createElement("td",null,t.status),r.a.createElement("td",null,r.a.createElement(d.b,{onClick:e.openModalBook(t.id,t.title,t.author,t.year,t.date,t.edition,t.typeBook),color:"dark"},"Modifier"),r.a.createElement(d.n,{isOpen:e.state.modal},r.a.createElement(d.q,null,"Modifications du livre"),r.a.createElement(d.o,null,r.a.createElement("label",{htmlFor:"title",className:"grey-text"},"Titre"),r.a.createElement("input",{type:"text",name:"title",value:e.state.title,className:"form-control",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"author",className:"grey-text"},"Auteur"),r.a.createElement("input",{type:"text",name:"author",value:e.state.author,className:"form-control",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"year",className:"grey-text"},"Ann\xe9e de sortie"),r.a.createElement("input",{type:"number",name:"year",className:"form-control",value:e.state.year,onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"date",className:"grey-text"},"Date d'achat"),r.a.createElement("input",{type:"date",name:"date",value:e.state.date,className:"form-control",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"edition",className:"grey-text"},"Edition"),r.a.createElement("input",{type:"text",name:"edition",value:e.state.edition,className:"form-control",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"typeBook",className:"grey-text"},"Type"),r.a.createElement("input",{type:"text",name:"typeBook",value:e.state.typeBook,className:"form-control",onChange:function(t){return e.change(t)}})),r.a.createElement(d.p,null,r.a.createElement(d.b,{color:"danger",onClick:e.closeModalBook},"Annuler"),r.a.createElement(d.b,{onClick:e.editBook(e.state.title,e.state.author,e.state.year,e.state.date,e.state.edition,e.state.typeBook),color:"dark"},"Enregistrer")))),r.a.createElement("td",null,r.a.createElement(d.b,{onClick:e.handleDelete(t.id),color:"danger"},"Supprimer")))})))))}}]),t}(r.a.Component)),T=(a(112),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).openModalBuy=function(e){return function(t){a.setState({modal:!0,idPurchase:e})}},a.closeModalBuy=function(){a.setState({modal:!1})},a.change=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.buyBook=function(e,t,n,r){return function(l){var o=a.state,s=o.idPurchase,c=o.purchases,i=c;console.log(s,"idPurchaseSubmit"),a.setState({modal:!1});var u=new FormData;u.append("id",s),u.append("year",e),u.append("date",t),u.append("edition",n),u.append("typeBook",r);f.a.post("http://localhost:8888/API/MesProchainsAchats/transfert_prochain_achat.php",u,{withCredentials:!0}).then((function(e){console.log(e.status,e),alert("Livre transf\xe9r\xe9 dans votre biblioth\xe8que"),i=c.filter((function(e){return e.id!==s}))})).catch((function(e){console.log(e),e.response&&403===e.response.status&&(console.log(e),alert(e.response.data))})),setTimeout((function(){a.setState({purchases:i})}),500),setTimeout((function(){a.setState({error:""})}),2e3),l.preventDefault()}},a.handleDelete=function(e){return function(t){var n=a.state.purchases,r=n,l=new FormData;l.append("id",e);f.a.post("http://localhost:8888/API/MesLivres/supprimer_livre.php",l,{withCredentials:!0}).then((function(t){r=n.filter((function(t){return t.id!==e})),alert("Livre supprim\xe9 de vos prochains achats")})).catch((function(e){console.log(e),403===e.response.status&&(console.log(e),alert("Echec de la suppression"))})),setTimeout((function(){a.setState({purchases:r})}),500),setTimeout((function(){a.setState({error:""})}),2e3),t.preventDefault()}},a.state={noSession:!1,loading:!0,purchases:[],year:"",date:"",edition:"",typeBook:"",modal:!1,id:"",error:"",idPurchase:null},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a.handleDelete=a.handleDelete.bind(Object(x.a)(a)),a.buyBook=a.buyBook.bind(Object(x.a)(a)),a.openModalBuy=a.openModalBuy.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"componentDidMount",value:function(){var e=Object(j.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8888/API/MesProchainsAchats/liste_achat.php",e.next=3,fetch("http://localhost:8888/API/MesProchainsAchats/liste_achat.php",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({purchases:a.results.livres,loading:!1}),console.log(a.results.livres);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.noSession;return this.checkSession(),t?r.a.createElement(o.a,{to:"/"}):this.state.loading?r.a.createElement("div",null,"chargement..."):0===this.state.purchases.length?r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyPurchases"}," Mes prochains achats "),r.a.createElement("div",{className:"noPurchase"},"Vous n'avez actuellement aucun achat pr\xe9vu."),r.a.createElement("div",{className:"buttonAchat"},r.a.createElement(n.Fragment,null,r.a.createElement(d.b,{href:"/formulaireProchainAchat",color:"dark"},"Ajouter un prochain achat")))):r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyPurchases"}," Mes prochains achats "),r.a.createElement("h2",null," Vous avez ",this.state.purchases.length," prochain(s) achat(s) programm\xe9(s):"),r.a.createElement("br",null),r.a.createElement(d.z,{hover:!0,bordered:!0,scrollY:!0,maxHeight:"350px"},r.a.createElement(d.B,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titre"),r.a.createElement("th",null,"Auteur"),r.a.createElement("th",null),r.a.createElement("th",null))),r.a.createElement(d.A,null,this.state.purchases.map((function(t){return r.a.createElement("tr",{key:t.id,onChange:e.Change},r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.author),r.a.createElement("td",null,r.a.createElement(d.b,{onClick:e.openModalBuy(t.id),color:"dark"},"Achet\xe9"),r.a.createElement(d.n,{isOpen:e.state.modal},r.a.createElement(d.q,null,"Informations compl\xe8mentaires"),r.a.createElement(d.o,null,r.a.createElement("label",{htmlFor:"year",className:"grey-text"},"Ann\xe9e de sortie"),r.a.createElement("input",{type:"number",name:"year",value:e.state.year,className:"form-control",placeholder:"Ann\xe9e",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"date",className:"grey-text"},"Date d'achat"),r.a.createElement("input",{type:"date",name:"date",value:e.state.date,placeholder:"jj/mm/aa",className:"form-control",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"edition",className:"grey-text"},"Edition"),r.a.createElement("input",{type:"text",name:"edition",value:e.state.edition,placeholder:"Edition",className:"form-control",onChange:function(t){return e.change(t)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"typeBook",className:"grey-text"},"Type"),r.a.createElement("input",{type:"text",name:"typeBook",value:e.state.typeBook,placeholder:"Type",className:"form-control",onChange:function(t){return e.change(t)}})),r.a.createElement(d.p,null,r.a.createElement(d.b,{color:"danger",onClick:e.closeModalBuy},"Annuler"),r.a.createElement(d.b,{onClick:e.buyBook(e.state.year,e.state.date,e.state.edition,e.state.typeBook),color:"dark"},"Valider l'achat")))),r.a.createElement("td",null,r.a.createElement(d.b,{onClick:e.handleDelete(t.id),color:"danger"},"Supprimer")))})))),r.a.createElement("div",{className:"buttonAchat"},r.a.createElement(n.Fragment,null,r.a.createElement(d.b,{href:"/formulaireProchainAchat",color:"dark"},"Ajouter un prochain achat"))))}}]),t}(r.a.Component)),q=(a(113),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={noSession:!1,loading:!0,historic:[],error:""},a.checkSession=a.checkSession.bind(Object(x.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"checkSession",value:function(){var e=this;f.a.get("http://localhost:8888/API/Session/session.php",{withCredentials:!0}).then((function(e){console.log(e)})).catch((function(t){t.response&&404===t.response.status&&(e.setState({noSession:!0}),console.log(t))}))}},{key:"componentDidMount",value:function(){var e=Object(j.a)(S.a.mark((function e(){var t,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http://localhost:8888/API/MesLivres/liste_historique.php",e.next=3,fetch("http://localhost:8888/API/MesLivres/liste_historique.php",{credentials:"include"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,this.setState({historic:a.results.livres,loading:!1}),console.log(a.results.livres);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.noSession;return this.checkSession(),e?r.a.createElement(o.a,{to:"/"}):this.state.loading?r.a.createElement("div",null,"chargement..."):0===this.state.historic.length?r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyHistoric"}," Mon historique des pr\xeats "),r.a.createElement("div",{className:"noHistoric"},"Aucun pr\xeat effectu\xe9.")):r.a.createElement("div",null,r.a.createElement("h1",{className:"titleMyHistoric"}," Mon historique des pr\xeats "),r.a.createElement("br",null),r.a.createElement(d.z,{hover:!0,bordered:!0,scrollY:!0,maxHeight:"400px"},r.a.createElement(d.B,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titre"),r.a.createElement("th",null,"Auteur"),r.a.createElement("th",null,"Emprunteur"),r.a.createElement("th",null,"Date d'emprunt"),r.a.createElement("th",null,"Date de rendu"))),r.a.createElement(d.A,null,this.state.historic.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.title),r.a.createElement("td",null,e.author),r.a.createElement("td",null,e.borrower),r.a.createElement("td",null,e.date1),r.a.createElement("td",null,e.date2))})))))}}]),t}(n.Component)),_=function(e){return r.a.createElement(y,e,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:C}),r.a.createElement(o.b,{exact:!0,path:"/inscription",component:w}),r.a.createElement(o.b,{exact:!0,path:"/accueil",component:B}),r.a.createElement(o.b,{exact:!0,path:"/ajoutLivre",component:P}),r.a.createElement(o.b,{exact:!0,path:"/formulaireGerePret",component:D}),r.a.createElement(o.b,{exact:!0,path:"/formulaireProchainAchat",component:F}),r.a.createElement(o.b,{exact:!0,path:"/mesPrets",component:I}),r.a.createElement(o.b,{exact:!0,path:"/mesLivres",component:L}),r.a.createElement(o.b,{exact:!0,path:"/gererMonCompte",component:A}),r.a.createElement(o.b,{exact:!0,path:"/prochainAchat",component:T}),r.a.createElement(o.b,{exact:!0,path:"/historique",component:q}),r.a.createElement(o.b,{component:O})))};c.a.render(r.a.createElement(l.a,null,r.a.createElement(o.b,{component:_})),document.getElementById("root"))},56:function(e,t,a){e.exports=a(114)},61:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.718a670b.chunk.js.map